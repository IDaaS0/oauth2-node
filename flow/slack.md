![](https://media.discordapp.net/attachments/870596181728837692/870683994818244608/Slack_RGB.png?width=943&height=386)

# Slack Oauth2 認証Flow

SlackはOAuth 2.0の認可コード付与フローを利用して、ユーザーに代わってアクセストークンを発行します。

![](https://cdn.discordapp.com/attachments/870596181728837692/870684680100413460/slack_oauth_flow_diagram.png)

# Step 
- [ステップ1 - 認証やインストールのためにユーザーを送る](#ステップ1---認証やインストールのためにユーザーを送る)
- [ステップ2 - ユーザーは認証コードを使ってあなたのサーバーにリダイレクトされる](#ステップ2---ユーザーは認証コードを使ってあなたのサーバーにリダイレクトされる)
- [ステップ3 - 認証コードとアクセストークンの交換](#ステップ3---認証コードとアクセストークンの交換)

# ステップ1 - 認証やインストールのためにユーザーを送る

あなたのウェブやモバイルアプリは、ユーザーを次のURLにリダイレクトする必要があります。

```
https://slack.com/oauth/authorize
```

以下の値は、GETパラメータとして渡す必要があります。

|  パラメーター  |||
|:------------: | :-------------: |  -------------: |
|  client_id  |  アプリを作成した際に発行されたもの  |  必須  |
|  scope  |  要求する権限  |  必須  |
|  redirect_uri  |  リダイレクト先のURL  |  必須  |
|  state  |  完了時に返される一意の文字列  |  任意  |
|  team  |  制限をかけようとするワークスペースのSlackチームID  |  任意  |

# ステップ2 - ユーザーは認証コードを使ってあなたのサーバーにリダイレクトされる 

ユーザーがアプリを認証すると、Slack は指定した `redirect_uri` にリダイレクトして、`code` GET パラメーターに一時的なコードを、また前のステップで `state` パラメーターを提供した場合はそのコードを返します。状態が一致しない場合は、リクエストが第三者によって作成された可能性があるため、処理を中止する必要があります。

> 認証コードは1回のみ交換でき、発行後10分で有効期限が切れます。

# ステップ3 - 認証コードとアクセストークンの交換

問題がなければ、oauth.access APIメソッドを使って、認証コードをアクセストークンに交換します。

- [新しいSlackアプリ](https://api.slack.com/methods/oauth.v2.access)
- [従来のSlackアプリ](https://api.slack.com/methods/oauth.access)